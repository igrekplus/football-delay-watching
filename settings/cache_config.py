# キャッシュ設定

"""
キャッシュ関連の設定値を一元管理する。
TTL（有効期限）、バケット名、ローカルキャッシュパス等を定義。
"""

import os
from pathlib import Path

# =============================================================================
# バックエンド設定
# =============================================================================

# キャッシュバックエンド: "gcs" または "local"
CACHE_BACKEND = os.getenv("CACHE_BACKEND", "gcs")

# GCS設定
GCS_BUCKET_NAME = os.getenv("GCS_CACHE_BUCKET", "football-delay-watching-cache")

# ローカルキャッシュ設定
LOCAL_CACHE_DIR = Path("api_cache")

# =============================================================================
# エンドポイント別TTL設定（日数）
# =============================================================================
# None = 無期限（静的データ）
# 0 = キャッシュしない
# N = N日間有効

ENDPOINT_TTL_DAYS = {
    # 選手データ: 国籍等は静的なので無期限
    "players": None,
    
    # スタメン: 試合後は確定なので無期限
    "lineups": None,
    
    # 試合情報: 10日間
    "fixtures": 10,
    
    # 対戦履歴: 10日間
    "headtohead": 10,
    
    # チーム統計: 10日間
    "statistics": 10,
    
    # 怪我人情報: キャッシュしない（リアルタイム性が重要）
    "injuries": 0,
    
    # スクワッド: 7日間（移籍期間中は変動あり）
    "squads": 7,
}

# =============================================================================
# Gemini Grounding キャッシュ設定
# =============================================================================

# Grounding キャッシュ（Google Search連携）の有効期限（日数）
GROUNDING_TTL_DAYS = {
    "tactical_preview": 7,   # 戦術プレビュー
    "interview": 7,          # 監督インタビュー
}

# =============================================================================
# キャッシュ有効化フラグ
# =============================================================================

# Falseにするとキャッシュを完全にバイパス
USE_API_CACHE = os.getenv("USE_API_CACHE", "True").lower() == "true"
