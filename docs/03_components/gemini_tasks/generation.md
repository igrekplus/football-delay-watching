# Grounding生成タスク一覧

本ドキュメントは、GeminiのGrounding（Google検索連携）機能を使用するテキスト生成タスクの仕様を定義する。
Groundingのメカニズム詳細については [../gemini_grounding.md](../gemini_grounding.md) を参照。
共通の制約については [common.md](./common.md) を参照。

> [!IMPORTANT]
> **プロンプトの単一ソース**: 本番で使用するプロンプトは [settings/gemini_prompts.py](../../../settings/gemini_prompts.py) に定義されています。本ドキュメントは概要説明のためのものであり、実装時は必ず `gemini_prompts.py` を参照してください。

---

## 1. ニュース要約 (generate_news_summary)

### 1.1 目的
試合に関する最新ニュースを検索し、試合前サマリーを生成する。

### 1.2 プロンプト仕様

Groundingにより自動で最新ニュースを取得し、日本語の試合前サマリーを生成する。

**主な要件**:
- 両チームの最新状況、フォームを記述
- 試合結果（スコア）は絶対に含めない
- 600-1000字程度

### 1.3 実装ポイント
- **クライアント**: REST (`GeminiRestClient`)
- **モデル**: `gemini-2.0-flash-exp`
- **入力**: Grounding経由で自動取得（手動でのニュース記事提供は不要）
- **出力**: 日本語、600-1000文字
- **制約**: 結果言及禁止、AI応答文禁止

---

## 2. 戦術プレビュー (generate_tactical_preview)

### 2.1 目的
両チームのスタメン・フォーメーション情報を基に、戦術分析とキーマッチアップを生成する。

### 2.2 プロンプト仕様

フォーメーション・スタメン情報を入力として受け取り、Groundingで過去の戦術傾向を検索して分析を生成する。

**出力構成**:
1. ⚽ キープレイヤー
2. 🎯 戦術スタイル
3. 🔥 キーマッチアップ

### 2.3 実装ポイント
- **クライアント**: REST (`GeminiRestClient`)
- **モデル**: `gemini-2.0-flash-exp`
- **入力**: スタメン、フォーメーション情報（API-Footballから取得）+ Grounding検索
- **出力**: 日本語
- **制約**: フォーメーション・マッチアップにフォーカス、結果言及禁止
