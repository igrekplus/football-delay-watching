# YouTubeå‹•ç”»å–å¾—ãƒ­ã‚¸ãƒƒã‚¯ä»•æ§˜æ›¸

> **Last Updated**: 2025-12-28  
> **Source of Truth**: `src/youtube_service.py`, `src/youtube_filter.py`

## æ¦‚è¦

è©¦åˆãƒ¬ãƒãƒ¼ãƒˆã«å«ã‚ã‚‹YouTubeå‹•ç”»ã‚’å–å¾—ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã€‚
**ã‚­ãƒƒã‚¯ã‚ªãƒ•å‰ã®å‹•ç”»ã®ã¿ã‚’å¯¾è±¡**ã¨ã—ã€è©¦åˆçµæœã®ãƒã‚¿ãƒãƒ¬ã‚’é˜²ãã€‚

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    YouTubeService                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  get_videos_for_match(match)                                â”‚
â”‚    â”œâ”€ _search_press_conference() Ã— 2ãƒãƒ¼ãƒ                   â”‚
â”‚    â”‚    â””â”€ filter.exclude_highlights() + filter.sort_trusted()
â”‚    â”œâ”€ _search_historic_clashes() Ã— 1                        â”‚
â”‚    â”‚    â””â”€ filter.sort_trusted() ã®ã¿ï¼ˆãƒã‚¤ãƒ©ã‚¤ãƒˆé™¤å¤–ãªã—ï¼‰  â”‚
â”‚    â”œâ”€ _search_tactical() Ã— 2ãƒãƒ¼ãƒ                           â”‚
â”‚    â”‚    â””â”€ filter.exclude_highlights() + filter.sort_trusted()
â”‚    â”œâ”€ _search_player_highlight() Ã— 6é¸æ‰‹                    â”‚
â”‚    â”‚    â””â”€ filter.exclude_highlights() + filter.sort_trusted()
â”‚    â”œâ”€ _search_training() Ã— 2ãƒãƒ¼ãƒ                           â”‚
â”‚    â”‚    â””â”€ filter.exclude_highlights() + filter.sort_trusted()
â”‚    â””â”€ filter.deduplicate() â† æœ€å¾Œã«å…¨çµæœã‚’çµ±åˆ             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 YouTubePostFilter (æ–°è¦)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  exclude_highlights(videos) â†’ è©¦åˆãƒã‚¤ãƒ©ã‚¤ãƒˆ/ãƒ©ã‚¤ãƒ–ç­‰ã‚’é™¤å¤– â”‚
â”‚  sort_trusted(videos)       â†’ ä¿¡é ¼ãƒãƒ£ãƒ³ãƒãƒ«å„ªå…ˆã‚½ãƒ¼ãƒˆ     â”‚
â”‚  deduplicate(videos)        â†’ é‡è¤‡æ’é™¤ï¼ˆvideo_id ãƒ™ãƒ¼ã‚¹ï¼‰  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¸€è¦§

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ | å¯¾å¿œãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ |
|-------------|-------------|-------------|------|
| `PRESS_CONFERENCE_SEARCH_HOURS` | **48** | `_search_press_conference()` | è¨˜è€…ä¼šè¦‹æ¤œç´¢æœŸé–“ |
| `HISTORIC_SEARCH_DAYS` | **730**ï¼ˆ2å¹´ï¼‰ | `_search_historic_clashes()` | éå»ãƒã‚¤ãƒ©ã‚¤ãƒˆæ¤œç´¢æœŸé–“ |
| `TACTICAL_SEARCH_DAYS` | **180**ï¼ˆ6ãƒ¶æœˆï¼‰ | `_search_tactical()` | æˆ¦è¡“åˆ†ææ¤œç´¢æœŸé–“ |
| `PLAYER_SEARCH_DAYS` | **180**ï¼ˆ6ãƒ¶æœˆï¼‰ | `_search_player_highlight()` | é¸æ‰‹ç´¹ä»‹æ¤œç´¢æœŸé–“ |
| `TRAINING_SEARCH_HOURS` | **168**ï¼ˆ1é€±é–“ï¼‰ | `_search_training()` | ç·´ç¿’å‹•ç”»æ¤œç´¢æœŸé–“ |
| `FETCH_MAX_RESULTS` | **50** | å…¨ãƒ¡ã‚½ãƒƒãƒ‰ | å–å¾—ä»¶æ•°ï¼ˆpost-filterå‰ï¼‰ |

---

## YouTubePostFilter ã‚¯ãƒ©ã‚¹è¨­è¨ˆ

### ãƒ•ã‚¡ã‚¤ãƒ«: `src/youtube_filter.py` (æ–°è¦)

```python
class YouTubePostFilter:
    """YouTubeå‹•ç”»ã®post-filterã‚’æä¾›ã™ã‚‹ã‚¯ãƒ©ã‚¹"""
    
    def exclude_highlights(self, videos: List[Dict]) -> Dict[str, List[Dict]]:
        """è©¦åˆãƒã‚¤ãƒ©ã‚¤ãƒˆ/ãƒ•ãƒ«ãƒãƒƒãƒ/ãƒ©ã‚¤ãƒ–é…ä¿¡ã‚’é™¤å¤–"""
        # returns {"kept": [...], "removed": [...]}
    
    def sort_trusted(self, videos: List[Dict]) -> List[Dict]:
        """ä¿¡é ¼ãƒãƒ£ãƒ³ãƒãƒ«å„ªå…ˆã§ã‚½ãƒ¼ãƒˆ"""
    
    def deduplicate(self, videos: List[Dict]) -> List[Dict]:
        """é‡è¤‡æ’é™¤ï¼ˆvideo_id ãƒ™ãƒ¼ã‚¹ï¼‰"""
```

### å„æ¤œç´¢ãƒ¡ã‚½ãƒƒãƒ‰ã§ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨

| ã‚«ãƒ†ã‚´ãƒª | `exclude_highlights()` | `sort_trusted()` | `deduplicate()` |
|---------|:---------------------:|:----------------:|:---------------:|
| è¨˜è€…ä¼šè¦‹ | âœ… | âœ… | - |
| éå»å¯¾æˆ¦ | âŒï¼ˆã‚¯ã‚¨ãƒªãŒhighlightså«ã‚€ï¼‰ | âœ… | - |
| æˆ¦è¡“åˆ†æ | âœ… | âœ… | - |
| é¸æ‰‹ç´¹ä»‹ | âœ… | âœ… | - |
| ç·´ç¿’é¢¨æ™¯ | âœ… | âœ… | - |
| **å…¨ä½“** | - | - | âœ…ï¼ˆæœ€å¾Œã«1å›ï¼‰ |

---

## å‹•ç”»ã‚«ãƒ†ã‚´ãƒªåˆ¥ä»•æ§˜

### ã‚«ãƒ†ã‚´ãƒª1: è¨˜è€…ä¼šè¦‹ (`press_conference`)

| é …ç›® | å€¤ |
|------|-----|
| ãƒ¡ã‚½ãƒƒãƒ‰ | `_search_press_conference()` |
| ã‚¯ã‚¨ãƒª | `{team} {manager_name} press conference` |
| ã‚¯ã‚¨ãƒªæ•° | **2ã‚¯ã‚¨ãƒª/è©¦åˆ**ï¼ˆ1ã‚¯ã‚¨ãƒª Ã— 2ãƒãƒ¼ãƒ ï¼‰ |
| æ¤œç´¢æœŸé–“ | ã‚­ãƒƒã‚¯ã‚ªãƒ• - 48æ™‚é–“ ï½ ã‚­ãƒƒã‚¯ã‚ªãƒ• |
| maxResults | **50** |
| é™¤å¤–ãƒ•ã‚£ãƒ«ã‚¿ | `match_highlights`, `highlights`, `full_match`, `live_stream`, `reaction` |
| ã‚½ãƒ¼ãƒˆãƒ•ã‚£ãƒ«ã‚¿ | `sort_trusted()` |

> **Note**: ç›£ç£åãŒãªã„å ´åˆã¯ `{team} press conference`

---

### ã‚«ãƒ†ã‚´ãƒª2: éå»å¯¾æˆ¦ãƒã‚¤ãƒ©ã‚¤ãƒˆ (`historic`)

| é …ç›® | å€¤ |
|------|-----|
| ãƒ¡ã‚½ãƒƒãƒ‰ | `_search_historic_clashes()` |
| ã‚¯ã‚¨ãƒª | `{home} vs {away} highlights` |
| ã‚¯ã‚¨ãƒªæ•° | **1ã‚¯ã‚¨ãƒª/è©¦åˆ** |
| æ¤œç´¢æœŸé–“ | ã‚­ãƒƒã‚¯ã‚ªãƒ• - 730æ—¥ ï½ ã‚­ãƒƒã‚¯ã‚ªãƒ• |
| maxResults | **50** |
| é™¤å¤–ãƒ•ã‚£ãƒ«ã‚¿ | `live_stream`, `press_conference`, `reaction` |
| ã‚½ãƒ¼ãƒˆãƒ•ã‚£ãƒ«ã‚¿ | `sort_trusted()` |

> **Note**: ã‚¯ã‚¨ãƒªè‡ªä½“ãŒ `highlights` ã‚’å«ã‚€ãŸã‚ã€ãƒã‚¤ãƒ©ã‚¤ãƒˆé™¤å¤–ãƒ•ã‚£ãƒ«ã‚¿ã¯é©ç”¨ã—ãªã„

---

### ã‚«ãƒ†ã‚´ãƒª3: æˆ¦è¡“åˆ†æ (`tactical`)

| é …ç›® | å€¤ |
|------|-----|
| ãƒ¡ã‚½ãƒƒãƒ‰ | `_search_tactical()` |
| ã‚¯ã‚¨ãƒª | `{team} æˆ¦è¡“ åˆ†æ` **ï¼ˆæ—¥æœ¬èªå›ºå®šï¼‰** |
| ã‚¯ã‚¨ãƒªæ•° | **2ã‚¯ã‚¨ãƒª/è©¦åˆ**ï¼ˆ1ã‚¯ã‚¨ãƒª Ã— 2ãƒãƒ¼ãƒ ï¼‰ |
| æ¤œç´¢æœŸé–“ | ã‚­ãƒƒã‚¯ã‚ªãƒ• - 180æ—¥ ï½ ã‚­ãƒƒã‚¯ã‚ªãƒ• |
| maxResults | **50** |
| é™¤å¤–ãƒ•ã‚£ãƒ«ã‚¿ | `match_highlights`, `highlights`, `full_match`, `live_stream`, `press_conference`, `reaction` |
| ã‚½ãƒ¼ãƒˆãƒ•ã‚£ãƒ«ã‚¿ | `sort_trusted()` |

---

### ã‚«ãƒ†ã‚´ãƒª4: é¸æ‰‹ç´¹ä»‹ (`player_highlight`)

| é …ç›® | å€¤ |
|------|-----|
| ãƒ¡ã‚½ãƒƒãƒ‰ | `_search_player_highlight()` |
| ã‚¯ã‚¨ãƒª | `{player_name} {team_name} ãƒ—ãƒ¬ãƒ¼` **ï¼ˆæ—¥æœ¬èªå›ºå®šï¼‰** |
| ã‚¯ã‚¨ãƒªæ•° | **6ã‚¯ã‚¨ãƒª/è©¦åˆ**ï¼ˆ3é¸æ‰‹ Ã— 2ãƒãƒ¼ãƒ ï¼‰ã€ãƒ‡ãƒãƒƒã‚°: 2ã‚¯ã‚¨ãƒª |
| æ¤œç´¢æœŸé–“ | ã‚­ãƒƒã‚¯ã‚ªãƒ• - 180æ—¥ ï½ ã‚­ãƒƒã‚¯ã‚ªãƒ• |
| maxResults | **50** |
| é™¤å¤–ãƒ•ã‚£ãƒ«ã‚¿ | `match_highlights`, `highlights`, `full_match`, `live_stream`, `press_conference`, `reaction` |
| ã‚½ãƒ¼ãƒˆãƒ•ã‚£ãƒ«ã‚¿ | `sort_trusted()` |

#### é¸æ‰‹é¸æŠãƒ­ã‚¸ãƒƒã‚¯

```python
# ã‚¹ã‚¿ãƒ¡ãƒ³ãƒªã‚¹ãƒˆã®æœ«å°¾ï¼ˆFWæƒ³å®šï¼‰ã‹ã‚‰å„ªå…ˆ
player_count = 1 if DEBUG_MODE else 3
for player in reversed(match.home_lineup):
    if len(home_players) < player_count:
        home_players.append(player)
```

---

### ã‚«ãƒ†ã‚´ãƒª5: ç·´ç¿’é¢¨æ™¯ (`training`)

| é …ç›® | å€¤ |
|------|-----|
| ãƒ¡ã‚½ãƒƒãƒ‰ | `_search_training()` |
| ã‚¯ã‚¨ãƒª | `{team} training` **ï¼ˆè‹±èªå›ºå®šï¼‰** |
| ã‚¯ã‚¨ãƒªæ•° | **2ã‚¯ã‚¨ãƒª/è©¦åˆ**ï¼ˆ1ã‚¯ã‚¨ãƒª Ã— 2ãƒãƒ¼ãƒ ï¼‰ |
| æ¤œç´¢æœŸé–“ | ã‚­ãƒƒã‚¯ã‚ªãƒ• - 168æ™‚é–“ï¼ˆ1é€±é–“ï¼‰ ï½ ã‚­ãƒƒã‚¯ã‚ªãƒ• |
| maxResults | **50** |
| é™¤å¤–ãƒ•ã‚£ãƒ«ã‚¿ | `match_highlights`, `highlights`, `full_match`, `live_stream`, `press_conference`, `reaction` |
| ã‚½ãƒ¼ãƒˆãƒ•ã‚£ãƒ«ã‚¿ | `sort_trusted()` |

---

## å‡¦ç†ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: æ¤œç´¢ï¼ˆã‚«ãƒ†ã‚´ãƒªåˆ¥ï¼‰                                  â”‚
â”‚   YouTubeService._search_videos()                           â”‚
â”‚   â”œâ”€ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒã‚§ãƒƒã‚¯ï¼ˆHIT ãªã‚‰APIå‘¼ã³å‡ºã—ã‚¹ã‚­ãƒƒãƒ—ï¼‰      â”‚
â”‚   â”œâ”€ YouTube Data API search.list å‘¼ã³å‡ºã—                  â”‚
â”‚   â””â”€ çµæœã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ä¿å­˜                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨ï¼ˆã‚«ãƒ†ã‚´ãƒªåˆ¥ï¼‰                        â”‚
â”‚   YouTubePostFilter.apply_filters() ã‚’ä½¿ç”¨                  â”‚
â”‚   â”œâ”€ è¨˜è€…ä¼šè¦‹: [match_highlights, highlights, ...]         â”‚
â”‚   â”œâ”€ éå»å¯¾æˆ¦: [live_stream, press_conference, reaction]   â”‚
â”‚   â”œâ”€ æˆ¦è¡“åˆ†æ: [match_highlights, highlights, ..., å…¨6ç¨®]  â”‚
â”‚   â”œâ”€ é¸æ‰‹ç´¹ä»‹: [åŒä¸Š]                                       â”‚
â”‚   â””â”€ ç·´ç¿’é¢¨æ™¯: [åŒä¸Š]                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: ã‚½ãƒ¼ãƒˆãƒ»ä»¶æ•°åˆ¶é™ï¼ˆã‚«ãƒ†ã‚´ãƒªåˆ¥ï¼‰                      â”‚
â”‚   filter.sort_trusted()  ... ä¿¡é ¼ãƒãƒ£ãƒ³ãƒãƒ«å„ªå…ˆã‚½ãƒ¼ãƒˆ      â”‚
â”‚   å„ã‚«ãƒ†ã‚´ãƒª10ä»¶ã«åˆ¶é™ã€è¶…éåˆ†ã¯overflow                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 4: é‡è¤‡æ’é™¤ï¼ˆå…¨ã‚«ãƒ†ã‚´ãƒªçµ±åˆå¾Œï¼‰                        â”‚
â”‚   filter.deduplicate()                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## é™¤å¤–ãƒ•ã‚£ãƒ«ã‚¿

`YouTubePostFilter` ã‚¯ãƒ©ã‚¹ã§æä¾›ã•ã‚Œã‚‹é™¤å¤–ãƒ•ã‚£ãƒ«ã‚¿ç¾¤ã€‚

### ãƒ•ã‚£ãƒ«ã‚¿ãƒ¡ã‚½ãƒƒãƒ‰ä¸€è¦§

| ãƒ¡ã‚½ãƒƒãƒ‰å | é™¤å¤–ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ | èª¬æ˜ |
|-----------|---------------|------|
| `filter_match_highlights()` | `highlights` + (`vs`/`v`/`vs.`) | è©¦åˆãƒã‚¤ãƒ©ã‚¤ãƒˆï¼ˆå¯¾æˆ¦å½¢å¼ï¼‰ |
| `filter_highlights()` | `highlights`, `match highlights`, `extended highlights` | å˜ç‹¬ãƒã‚¤ãƒ©ã‚¤ãƒˆ |
| `filter_full_match()` | `full match`, `full game`, `full replay` | ãƒ•ãƒ«ãƒãƒƒãƒ |
| `filter_live_stream()` | `live`, `livestream`, `watch live`, `streaming` | ãƒ©ã‚¤ãƒ–é…ä¿¡ |
| `filter_press_conference()` | `press conference` | è¨˜è€…ä¼šè¦‹ |
| `filter_reaction()` | `reaction` | ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³å‹•ç”» |

> **Note**: 
> - ãƒ•ã‚£ãƒ«ã‚¿ã¯ã‚¿ã‚¤ãƒˆãƒ« + èª¬æ˜æ–‡ã«å¯¾ã—ã¦é©ç”¨ï¼ˆå°æ–‡å­—å¤‰æ›å¾Œï¼‰
> - ã‚¹ãƒšãƒ¼ã‚¹å«ã‚€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆä¾‹: `press conference`ï¼‰ã¯ãã®ã¾ã¾éƒ¨åˆ†ä¸€è‡´æ¤œç´¢

### çµ„ã¿åˆã‚ã›API

```python
# è¤‡æ•°ãƒ•ã‚£ãƒ«ã‚¿ã‚’ã¾ã¨ã‚ã¦é©ç”¨
apply_filters(videos, filters=["match_highlights", "full_match", ...])
# -> {"kept": [...], "removed": [...]}
```

### ã‚«ãƒ†ã‚´ãƒªåˆ¥ãƒ•ã‚£ãƒ«ã‚¿é©ç”¨

| ã‚«ãƒ†ã‚´ãƒª | é©ç”¨ãƒ•ã‚£ãƒ«ã‚¿ |
|---------|-------------|
| è¨˜è€…ä¼šè¦‹ | `match_highlights`, `highlights`, `full_match`, `live_stream`, `reaction` |
| éå»å¯¾æˆ¦ | `live_stream`, `press_conference`, `reaction` |
| æˆ¦è¡“åˆ†æ | `match_highlights`, `highlights`, `full_match`, `live_stream`, `press_conference`, `reaction` |
| é¸æ‰‹ç´¹ä»‹ | åŒä¸Š |
| ç·´ç¿’é¢¨æ™¯ | åŒä¸Š |

> **Design Note**: 
> - è¨˜è€…ä¼šè¦‹ã‚«ãƒ†ã‚´ãƒªã§ã¯ `press_conference` ãƒ•ã‚£ãƒ«ã‚¿ã‚’é©ç”¨ã—ãªã„ï¼ˆã‚¯ã‚¨ãƒªè‡ªä½“ãŒpress conferenceã‚’æ¤œç´¢ï¼‰
> - éå»å¯¾æˆ¦ã‚«ãƒ†ã‚´ãƒªã§ã¯ `highlights` ãƒ•ã‚£ãƒ«ã‚¿ã‚’é©ç”¨ã—ãªã„ï¼ˆã‚¯ã‚¨ãƒªè‡ªä½“ãŒhighlightsã‚’æ¤œç´¢ï¼‰

---

## ä¿¡é ¼ãƒãƒ£ãƒ³ãƒãƒ«ç®¡ç†

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
settings/channels.py
â”œâ”€ TRUSTED_CHANNELS: Dict[str, Dict]  # ãƒãƒ£ãƒ³ãƒãƒ«ID â†’ ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
â”œâ”€ is_trusted_channel(channel_id)     # åˆ¤å®šé–¢æ•°
â”œâ”€ get_channel_info(channel_id)       # ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å–å¾—
â””â”€ get_channel_display_name(...)      # è¡¨ç¤ºåå–å¾—
```

### TRUSTED_CHANNELS æ§‹é€ 

```python
TRUSTED_CHANNELS = {
    "UCkzCjdRMrW2vXLx8mvPVLdQ": {
        "name": "Man City",
        "handle": "@mancity",
        "category": "team",
    },
    # ...
}
```

### ã‚«ãƒ†ã‚´ãƒªä¸€è¦§

| category | èª¬æ˜ | ä¾‹ |
|----------|------|-----|
| `team` | ã‚¯ãƒ©ãƒ–å…¬å¼ | Man City, Arsenal, Liverpool |
| `league` | ãƒªãƒ¼ã‚°å…¬å¼ | Premier League, La Liga |
| `broadcaster` | æ”¾é€å±€ | Sky Sports, DAZN, TNT Sports |
| `tactics` | æˆ¦è¡“åˆ†æ | Tifo Football, ãƒ¬ã‚ªã‚¶ãƒ•ãƒƒãƒˆãƒœãƒ¼ãƒ« |
| `media` | ãƒ¡ãƒ‡ã‚£ã‚¢ | ã‚¹ãƒãƒ«ãƒ†ã‚£ãƒ¼ãƒ, PIVOT |

---

## ã‚½ãƒ¼ãƒˆãƒ­ã‚¸ãƒƒã‚¯

```python
# ä¿¡é ¼ãƒãƒ£ãƒ³ãƒãƒ«å„ªå…ˆã€ãã®ä¸­ã§ã¯relevanceé †ç¶­æŒ
videos.sort(key=lambda v: (
    0 if v["is_trusted"] else 1,  # ä¿¡é ¼ãƒãƒ£ãƒ³ãƒãƒ«å„ªå…ˆ
    v.get("original_index", 0)     # relevanceé †ã‚’ç¶­æŒ
))
```

---

## ã‚­ãƒ£ãƒƒã‚·ãƒ¥

| é …ç›® | å€¤ |
|------|-----|
| TTL | **168æ™‚é–“ï¼ˆ1é€±é–“ï¼‰** |
| ä¿å­˜å…ˆ | `api_cache/youtube/{cache_key}.json` |
| ã‚­ãƒ¼ã®æ§‹æˆ | `query + relevance_language + region_code + channel_id + publishedAfter + publishedBefore` â†’ MD5 |
| æœ‰åŠ¹åŒ– | `config.USE_API_CACHE` ã¾ãŸã¯ `cache_enabled` å¼•æ•° |

---

## APIã‚¯ã‚©ãƒ¼ã‚¿

| é …ç›® | å€¤ |
|------|-----|
| ç„¡æ–™æ  | 10,000ãƒ¦ãƒ‹ãƒƒãƒˆ/æ—¥ |
| search.list | **100ãƒ¦ãƒ‹ãƒƒãƒˆ/ãƒªã‚¯ã‚¨ã‚¹ãƒˆ** |
| ãƒªã‚»ãƒƒãƒˆæ™‚é–“ | å¤ªå¹³æ´‹æ™‚é–“ 0:00ï¼ˆJST 17:00ï¼‰ |

### 1è©¦åˆã‚ãŸã‚Šã®ã‚³ã‚¹ãƒˆ

| ã‚«ãƒ†ã‚´ãƒª | ã‚¯ã‚¨ãƒªæ•° | ãƒ¦ãƒ‹ãƒƒãƒˆ |
|---------|----------|----------|
| è¨˜è€…ä¼šè¦‹ | 2 | 200 |
| éå»å¯¾æˆ¦ãƒã‚¤ãƒ©ã‚¤ãƒˆ | 1 | 100 |
| æˆ¦è¡“åˆ†æ | 2 | 200 |
| é¸æ‰‹ç´¹ä»‹ | 6ï¼ˆãƒ‡ãƒãƒƒã‚°: 2ï¼‰ | 600ï¼ˆ200ï¼‰ |
| ç·´ç¿’é¢¨æ™¯ | 2 | 200 |
| **åˆè¨ˆï¼ˆé€šå¸¸ï¼‰** | **13** | **1,300** |
| **åˆè¨ˆï¼ˆãƒ‡ãƒãƒƒã‚°ï¼‰** | **9** | **900** |

---

## å…¬é–‹APIï¼ˆhealthcheckç”¨ï¼‰

| ãƒ¡ã‚½ãƒƒãƒ‰ | ç”¨é€” |
|---------|------|
| `search_videos_raw(...)` | ç”Ÿæ¤œç´¢ï¼ˆãƒ•ã‚£ãƒ«ã‚¿ãªã—ï¼‰ |
| `apply_trusted_channel_sort(videos)` | ä¿¡é ¼ãƒãƒ£ãƒ³ãƒãƒ«å„ªå…ˆã‚½ãƒ¼ãƒˆ |
| `apply_player_post_filter(videos)` | é¸æ‰‹post-filter |
| `search_training_videos(team, kickoff, max_results)` | ç·´ç¿’å‹•ç”»æ¤œç´¢ |
| `search_player_videos(player, team, kickoff, max_results, apply_post_filter)` | é¸æ‰‹å‹•ç”»æ¤œç´¢ |

---

## ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›å½¢å¼

```html
<details>
<summary><strong>ğŸ¤ è¨˜è€…ä¼šè¦‹ (3ä»¶)</strong></summary>
<table class="youtube-table">
<thead><tr><th>ã‚µãƒ ãƒã‚¤ãƒ«</th><th>å‹•ç”»æƒ…å ±</th></tr></thead>
<tbody>
<tr>
  <td><a href="..."><img src="..." style="width:120px;height:auto;"></a></td>
  <td><strong><a href="...">Title...</a></strong><br/>
      ğŸ“º <strong>âœ… Man City</strong> ãƒ» ğŸ• 2æ—¥å‰<br/>
      <em>Description...</em></td>
</tr>
</tbody>
</table>
</details>
```

- **âœ…**: ä¿¡é ¼ãƒãƒ£ãƒ³ãƒãƒ«ï¼ˆTRUSTED_CHANNELSç™»éŒ²æ¸ˆã¿ï¼‰
- **âš ï¸**: éä¿¡é ¼ãƒãƒ£ãƒ³ãƒãƒ«ï¼ˆè¦ç¢ºèªï¼‰

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | å†…å®¹ |
|------|------|
| 2025-12-28 | å…¨ã‚«ãƒ†ã‚´ãƒª maxResults ã‚’ 50 ã«æ‹¡å¼µï¼ˆIssue #45, #46å¯¾å¿œï¼‰ |
| 2025-12-28 | ãƒã‚¤ãƒ©ã‚¤ãƒˆé™¤å¤–post-filterã‚’å…¨ã‚«ãƒ†ã‚´ãƒªã«é©ç”¨ï¼ˆéå»å¯¾æˆ¦é™¤ãï¼‰ |
| 2025-12-27 | é¸æ‰‹ã‚¯ã‚¨ãƒªã‚’ `{player} {team} ãƒ—ãƒ¬ãƒ¼` ã«å¤‰æ›´ |
| 2025-12-27 | é¸æ‰‹ç´¹ä»‹ maxResults ã‚’ 50 ã«æ‹¡å¼µ + post-filterè¿½åŠ  |
| 2025-12-27 | ç·´ç¿’å‹•ç”»æ¤œç´¢æœŸé–“ã‚’168æ™‚é–“ï¼ˆ1é€±é–“ï¼‰ã«å»¶é•· |
| 2025-12-27 | å…¬é–‹APIè¿½åŠ ï¼ˆ`search_training_videos`, `search_player_videos`ï¼‰ |
| 2025-12-27 | ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° |
| 2025-12-24 | Issue #27: ã‚¯ã‚¨ãƒªå‰Šæ¸›ï¼ˆ20â†’13ï¼‰ã€post-fetchãƒ•ã‚£ãƒ«ã‚¿æ–¹å¼å®Ÿè£… |
| 2025-12-24 | ã‚­ãƒ£ãƒƒã‚·ãƒ¥TTL 24æ™‚é–“â†’1é€±é–“ã«å¤‰æ›´ |
| 2025-12-24 | é¸æ‰‹ç´¹ä»‹ã‚«ãƒ†ã‚´ãƒªã‚’æˆ¦è¡“ã‹ã‚‰åˆ†é›¢ |
